webpackJsonp([17],{"Bq9+":function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.main .right[data-v-620dbb03] {\n  float: right;\n  margin-right: 20px;\n}\n.main .right[data-v-620dbb03]:after {\n  clear: both;\n}\n.main .width[data-v-620dbb03] {\n  width: 300px;\n}\n",""])},C3gF:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("t5DY"),n={name:"push-model",data:function(){return{example:"noticeTemplate",tableHeight:500,pushModel:{name:""},pushModelTable:[],total:0,listQuery:{page:1,sizes:[10,20,30,40],size:10},state:0,searchParams:{name:"",noticeChannel:"SMS",page:0,size:10,fields:"*"},addForm:{name:"",noticeChannel:"SMS",aliSmsSignName:"",aliSmsTemplateCode:"",aliSmsTemplateContent:"",aliSmsTemplateParam:"",messageTemplate:"",wxworkAgentId:"",wxworkAgentSecret:"",wxworkTemplate:"",wxpublicTemplateId:"",wxpublicTemplateContent:"",wxpublicTemplateData:"",wxpublicTemplateUrl:""},dialogAddData:!1,options:[{value:"SMS",label:"阿里云"},{value:"MESSAGE",label:"站内信"},{value:"WXWORK",label:"企业微信"},{value:"WXPUBLIC",label:"微信公众号"},{value:"EMAIL",label:"邮箱",disabled:!0},{value:"APP",label:"移动端",disabled:!0}],value:"SMS",formState:0,multipleSelection:[]}},computed:{timestampToTime:function(){return l.l},getButtons:function(){return l.g}},mounted:function(){var e=this.$refs.height.offsetHeight;this.tableHeight=e-63-128-30,this.getPushModelData()},methods:{selectChange:function(e){this.searchParams.noticeChannel=e,this.state=["SMS","MESSAGE","WXWORK","WXPUBLIC","EMAIL","APP"].indexOf(e),this.getPushModelData()},onSubmit:function(){this.searchParams.name=this.pushModel.name,this.getPushModelData()},onClear:function(){this.pushModel.name="",this.getPushModelData()},onAdd:function(){this.dialogAddData=!0},onRemove:function(){var e=this;this.multipleSelection.forEach(function(t,a){Object(l.b)(e.example,{id:t.id}).then(function(t){a==e.multipleSelection.length-1&&(e.getPushModelData(),e.$notify({title:"成功",message:"模板移除成功",type:"success",duration:2e3}))})})},getPushModelData:function(){var e=this;Object(l.p)(this.example,Object(l.o)(this.searchParams,["name"])).then(function(t){console.log(t),e.pushModelTable=t.data,e.total=t.total})},handleSizeChange:function(e){this.searchParams.size=e,this.getPushModelData()},handleCurrentChange:function(e){this.searchParams.page=e-1,this.getPushModelData()},cancelCreate:function(){var e=this;this.$confirm("此操作将关闭表单和清空表单的数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.dialogAddData=!1,e.resetForm()}).catch(function(){e.$message({type:"info",message:"已取消该操作"})})},createData:function(){var e=this;Object(l.a)(this.example,this.addForm).then(function(t){e.$notify({title:"成功",message:"模板添加成功",type:"success",duration:2e3}),e.dialogAddData=!1,e.getPushModelData(),e.resetForm()})},resetForm:function(){this.$refs.addForm.resetFields()},selectChangeDialog:function(e){this.formState=["SMS","MESSAGE","WXWORK","WXPUBLIC","EMAIL","APP"].indexOf(e)},handleSelectionChange:function(e){this.multipleSelection=e}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"height",staticClass:"main"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.pushModel}},[a("el-form-item",{attrs:{label:"模板名称"}},[a("el-input",{attrs:{placeholder:"请输入模板名称"},model:{value:e.pushModel.name,callback:function(t){e.$set(e.pushModel,"name",t)},expression:"pushModel.name"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.onClear}},[e._v("清除")])],1),e._v(" "),a("el-select",{on:{change:e.selectChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),e._v(" "),a("el-form-item",{staticClass:"right"},[e.getButtons("add")?a("el-button",{attrs:{type:"success"},on:{click:e.onAdd}},[e._v("新增")]):e._e(),e._v(" "),e.getButtons("delete")?a("el-button",{attrs:{type:"warning"},on:{click:e.onRemove}},[e._v("删除")]):e._e()],1)],1),e._v(" "),a("el-table",{ref:"pushModelTable",staticStyle:{width:"100%"},attrs:{height:e.tableHeight,border:"",data:e.pushModelTable,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"模板名称",align:"center",prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),0===e.state?a("el-table-column",{attrs:{label:"阿里服务签名名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.aliSmsSignName))])]}}])}):e._e(),e._v(" "),0===e.state?a("el-table-column",{attrs:{label:"阿里服务模板编码",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.aliSmsTemplateCode))])]}}])}):e._e(),e._v(" "),0===e.state?a("el-table-column",{attrs:{label:"阿里服务模板内容",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.aliSmsTemplateContent))])]}}])}):e._e(),e._v(" "),0===e.state?a("el-table-column",{attrs:{label:"阿里服务模板参数",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.aliSmsTemplateParam))])]}}])}):e._e(),e._v(" "),1===e.state?a("el-table-column",{attrs:{label:"站内信模板",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.messageTemplate))])]}}])}):e._e(),e._v(" "),2===e.state?a("el-table-column",{attrs:{label:"企业微信代理编码",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.wxworkAgentId))])]}}])}):e._e(),e._v(" "),2===e.state?a("el-table-column",{attrs:{label:"企业微信代理秘钥",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.wxworkAgentSecret))])]}}])}):e._e(),e._v(" "),2===e.state?a("el-table-column",{attrs:{label:"企业微信代理模板",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.wxworkTemplate))])]}}])}):e._e(),e._v(" "),3===e.state?a("el-table-column",{attrs:{label:"微信公众号模板编码",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.wxpublicTemplateId))])]}}])}):e._e(),e._v(" "),3===e.state?a("el-table-column",{attrs:{label:"微信公众号模板内容",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.wxpublicTemplateContent))])]}}])}):e._e(),e._v(" "),3===e.state?a("el-table-column",{attrs:{label:"微信公众号模板JSON数据",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.wxpublicTemplateData))])]}}])}):e._e(),e._v(" "),3===e.state?a("el-table-column",{attrs:{label:"微信公众号模板链接",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.wxpublicTemplateUrl))])]}}])}):e._e()],1),e._v(" "),a("el-pagination",{attrs:{background:"","current-page":e.listQuery.page,"page-sizes":e.listQuery.sizes,"page-size":e.listQuery.size,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("el-dialog",{attrs:{title:"添加推送模板",width:"600px",visible:e.dialogAddData},on:{"update:visible":function(t){e.dialogAddData=t}}},[a("el-form",{ref:"addForm",staticClass:"demo-form-inline",attrs:{model:e.addForm,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"模板类型",prop:"noticeChannel"}},[a("el-select",{staticClass:"width",on:{change:e.selectChangeDialog},model:{value:e.addForm.noticeChannel,callback:function(t){e.$set(e.addForm,"noticeChannel",t)},expression:"addForm.noticeChannel"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"模板名称",prop:"name"}},[a("el-input",{staticClass:"width",attrs:{placeholder:"请输入用户"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),0==e.formState?a("el-form-item",{attrs:{label:"阿里服务签名名称",prop:"aliSmsSignName"}},[a("el-input",{staticClass:"width",attrs:{placeholder:"请输入阿里服务签名名称"},model:{value:e.addForm.aliSmsSignName,callback:function(t){e.$set(e.addForm,"aliSmsSignName",t)},expression:"addForm.aliSmsSignName"}})],1):e._e(),e._v(" "),0==e.formState?a("el-form-item",{attrs:{label:"阿里服务模板编码",prop:"aliSmsTemplateCode"}},[a("el-input",{staticClass:"width",attrs:{placeholder:"请输入阿里服务模板编码"},model:{value:e.addForm.aliSmsTemplateCode,callback:function(t){e.$set(e.addForm,"aliSmsTemplateCode",t)},expression:"addForm.aliSmsTemplateCode"}})],1):e._e(),e._v(" "),0==e.formState?a("el-form-item",{attrs:{label:"阿里服务模板内容",prop:"aliSmsTemplateContent"}},[a("el-input",{staticClass:"width",attrs:{placeholder:"请输入阿里服务模板内容"},model:{value:e.addForm.aliSmsTemplateContent,callback:function(t){e.$set(e.addForm,"aliSmsTemplateContent",t)},expression:"addForm.aliSmsTemplateContent"}})],1):e._e(),e._v(" "),0==e.formState?a("el-form-item",{attrs:{label:"阿里服务模板参数",prop:"aliSmsTemplateParam"}},[a("el-input",{staticClass:"width",attrs:{placeholder:"请输入阿里服务模板参数"},model:{value:e.addForm.aliSmsTemplateParam,callback:function(t){e.$set(e.addForm,"aliSmsTemplateParam",t)},expression:"addForm.aliSmsTemplateParam"}})],1):e._e(),e._v(" "),1==e.formState?a("el-form-item",{attrs:{label:"站内信模板",prop:"messageTemplate"}},[a("el-input",{staticClass:"width",attrs:{placeholder:"请输入站内信模板"},model:{value:e.addForm.messageTemplate,callback:function(t){e.$set(e.addForm,"messageTemplate",t)},expression:"addForm.messageTemplate"}})],1):e._e(),e._v(" "),2==e.formState?a("el-form-item",{attrs:{label:"企业微信代理编码",prop:"wxworkAgentId"}},[a("el-input",{staticClass:"width",attrs:{placeholder:"请输入企业微信代理编码"},model:{value:e.addForm.wxworkAgentId,callback:function(t){e.$set(e.addForm,"wxworkAgentId",t)},expression:"addForm.wxworkAgentId"}})],1):e._e(),e._v(" "),2==e.formState?a("el-form-item",{attrs:{label:"企业微信代理秘钥",prop:"wxworkAgentSecret"}},[a("el-input",{staticClass:"width",attrs:{placeholder:"请输入企业微信代理秘钥"},model:{value:e.addForm.wxworkAgentSecret,callback:function(t){e.$set(e.addForm,"wxworkAgentSecret",t)},expression:"addForm.wxworkAgentSecret"}})],1):e._e(),e._v(" "),2==e.formState?a("el-form-item",{attrs:{label:"企业微信代理模板",prop:"wxworkTemplate"}},[a("el-input",{staticClass:"width",attrs:{placeholder:"请输入企业微信代理模板"},model:{value:e.addForm.wxworkTemplate,callback:function(t){e.$set(e.addForm,"wxworkTemplate",t)},expression:"addForm.wxworkTemplate"}})],1):e._e(),e._v(" "),3==e.formState?a("el-form-item",{attrs:{label:"模板编码",prop:"wxpublicTemplateId"}},[a("el-input",{staticClass:"width",attrs:{placeholder:"请输入微信公众号模板编码"},model:{value:e.addForm.wxpublicTemplateId,callback:function(t){e.$set(e.addForm,"wxpublicTemplateId",t)},expression:"addForm.wxpublicTemplateId"}})],1):e._e(),e._v(" "),3==e.formState?a("el-form-item",{attrs:{label:"模板内容",prop:"wxpublicTemplateContent"}},[a("el-input",{staticClass:"width",attrs:{placeholder:"请输入微信公众号模板内容"},model:{value:e.addForm.wxpublicTemplateContent,callback:function(t){e.$set(e.addForm,"wxpublicTemplateContent",t)},expression:"addForm.wxpublicTemplateContent"}})],1):e._e(),e._v(" "),3==e.formState?a("el-form-item",{attrs:{label:"模板JSON数据",prop:"wxpublicTemplateData"}},[a("el-input",{staticClass:"width",attrs:{placeholder:"请输入微信公众号模板JSON数据"},model:{value:e.addForm.wxpublicTemplateData,callback:function(t){e.$set(e.addForm,"wxpublicTemplateData",t)},expression:"addForm.wxpublicTemplateData"}})],1):e._e(),e._v(" "),3==e.formState?a("el-form-item",{attrs:{label:"模板链接",prop:"wxpublicTemplateUrl"}},[a("el-input",{staticClass:"width",attrs:{placeholder:"请输入微信公众号模板链接"},model:{value:e.addForm.wxpublicTemplateUrl,callback:function(t){e.$set(e.addForm,"wxpublicTemplateUrl",t)},expression:"addForm.wxpublicTemplateUrl"}})],1):e._e()],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancelCreate}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.createData}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(n,o,!1,function(e){a("Vp0x")},"data-v-620dbb03",null);t.default=s.exports},Vp0x:function(e,t,a){var l=a("Bq9+");"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);a("rjj0")("31cefd0d",l,!0)}});