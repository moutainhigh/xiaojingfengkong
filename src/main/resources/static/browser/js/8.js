webpackJsonp([8],{"5ybE":function(e,t,n){"use strict";n("vLgD")},FMi9:function(e,t,n){var a=n("xxy8");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("rjj0")("4695a214",a,!0)},LtL1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("t5DY"),i=(n("5ybE"),{name:"index",data:function(){return{example:"department",ACTIVE:!0,tableData:[],departmentsVisible:!1,dialogFlag:"",dialogText:{true:"新增部门",false:"编辑部门"},tableHeight:500,openQuery:{id:"",enabled:""},closeQuery:{id:"",enabled:""},deleteQuery:{id:""},enabledText:{true:"启用",false:"禁用"},multipleSelection:[],dialogForm:{note:"",name:""},formInline:{page:"0",size:10,name:"",fields:"*,employees"},total:0,listQuery:{page:0,size:10,fields:"*,employees"},loadingInstance:"",rules:{username:[{message:"请输入账号",trigger:"blur"}],name:[{message:"请输入姓名",trigger:"blur"}],status:[{message:"请选择状态",trigger:"chagne"}]},dialogRule:{name:[{required:!0,message:"请输入部门名称",trigger:"blur"}],note:[{required:!0,message:"请输入备注",trigger:"blur"}]}}},computed:{timestampToTime:function(){return a.l},getButtons:function(){return a.g}},mounted:function(){this.getUser();var e=this.$refs.height.offsetHeight;this.tableHeight=e-63-128-30},methods:{sortList:function(e){var t="";e.order&&e.prop?(t="descending"===e.order?",desc":"ascending"===e.order?",asc":"",this.listQuery.sort=e.prop+t):this.listQuery.sort="createdAt,desc",this.getUser()},addNow:function(){this.dialogForm={note:"",name:""}},deleteUser:function(){var e=this;if(0==this.multipleSelection.length)return!1;this.multipleSelection.forEach(function(t,n){e.deleteQuery={id:t.id},Object(a.b)(e.example,e.deleteQuery).then(function(t){e.tableData.splice(n,1),n==e.multipleSelection.length-1&&e.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3})})})},handleUpdate:function(e){var t=this;this.dialogForm={id:e.id,name:e.name,note:e.note},this.$nextTick(function(){t.$refs.dialogForm.clearValidate()})},updateDate:function(){var e=this;this.$refs.dialogForm.validate(function(t){t&&Object(a.n)(e.example,e.dialogForm).then(function(t){e.departmentsVisible=!1,e.resetForm("dialogForm"),e.getUser(),e.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3})}).catch(function(e){console.log(e)})})},createDate:function(){var e=this;this.dialogForm.id&&delete this.dialogForm.id,this.$refs.dialogForm.validate(function(t){t&&Object(a.a)(e.example,e.dialogForm).then(function(t){e.departmentsVisible=!1,e.resetForm("dialogForm"),e.getUser(),e.$notify({title:"成功",message:"新建成功",type:"success",duration:2e3})})})},handleSizeChange:function(e){this.listQuery.size=e,this.getUser()},handleCurrentChange:function(e){this.listQuery.page=e-1,this.getUser()},getUser:function(){var e=this;Object(a.d)(this.example,this.listQuery).then(function(t){e.tableData=t.data,e.total=t.total})},onSubmit:function(e){var t=this;e?this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;Object(a.d)(t.example,Object(a.f)(t.formInline)).then(function(e){t.tableData=e.data,t.total=e.total})}):(this.formInline.id="",this.formInline.name="",Object(a.d)(this.example,Object(a.f)(this.formInline)).then(function(e){t.tableData=e.data,t.total=e.total}))},resetForm:function(e){this.departmentsVisible=!1,this.$refs[e].resetFields()},handleSelectionChange:function(e){this.multipleSelection=e}}}),l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"height",staticClass:"main",attrs:{id:"backgounduser"}},[n("el-form",{ref:"formInline",staticClass:"demo-form-inline",attrs:{inline:!0,rules:e.rules,model:e.formInline}},[n("el-form-item",{attrs:{label:"部门名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入部门名称"},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmit("formInline")}}},[e._v("查询")]),e._v(" "),n("el-button",{on:{click:function(t){e.onSubmit()}}},[e._v("清除")])],1),e._v(" "),n("el-form-item",{staticStyle:{float:"right"}},[e.getButtons("add")?n("el-button",{attrs:{type:"success"},on:{click:function(t){e.addNow("dialogForm"),e.departmentsVisible=!0,e.dialogFlag=!0}}},[e._v("新增")]):e._e(),e._v(" "),e.getButtons("delete")?n("el-button",{attrs:{type:"danger"},on:{click:e.deleteUser}},[e._v("删除")]):e._e()],1)],1),e._v(" "),n("el-table",{attrs:{data:e.tableData,height:e.tableHeight,border:""},on:{"selection-change":e.handleSelectionChange,"sort-change":e.sortList}},[n("el-table-column",{attrs:{align:"center",type:"selection",width:"55"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",prop:"name",label:"部门名称",width:"280"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",prop:"name",label:"部门成员数量",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(void 0!=t.row.employees.length?t.row.employees.length:"0"))])]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",prop:"note",label:"备注",width:"380"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.note.split("").length>20?n("el-popover",{attrs:{trigger:"hover",placement:"top"}},[n("p",{staticStyle:{width:"300px"}},[e._v(e._s(t.row.note))]),e._v(" "),n("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[n("el-tag",{staticStyle:{width:"250px","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"},attrs:{size:"medium"}},[e._v(e._s(t.row.note))])],1)]):n("span",[e._v(e._s(t.row.note?t.row.note:"-"))])]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"创建时间",prop:"createdAt",sortable:"custom",width:e.getButtons("edit")?200:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.timestampToTime(t.row.createdAt)))])]}}])}),e._v(" "),e.getButtons("edit")?n("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"small",icon:"el-icon-edit",type:"text"},on:{click:function(n){e.handleUpdate(t.row),e.departmentsVisible=!0,e.dialogFlag=!1}}},[e._v("编辑\n        ")])]}}])}):e._e()],1),e._v(" "),n("el-pagination",{attrs:{background:"","current-page":1,"page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),n("el-dialog",{attrs:{title:e.dialogText[e.dialogFlag],width:"30%",visible:e.departmentsVisible},on:{"update:visible":function(t){e.departmentsVisible=t}}},[n("el-form",{ref:"dialogForm",staticStyle:{"max-width":"400px"},attrs:{rules:e.dialogRule,model:e.dialogForm,"label-position":"right","label-width":"100px"}},[n("el-form-item",{attrs:{label:"部门名称",prop:"name"}},[n("el-input",{model:{value:e.dialogForm.name,callback:function(t){e.$set(e.dialogForm,"name",t)},expression:"dialogForm.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"备注",prop:"note"}},[n("el-input",{attrs:{type:"textarea","max-length":"100",rows:5,placeholder:"最多输入100个字"},model:{value:e.dialogForm.note,callback:function(t){e.$set(e.dialogForm,"note",t)},expression:"dialogForm.note"}})],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.resetForm("dialogForm")}}},[e._v("取 消")]),e._v(" "),1==e.dialogFlag?n("el-button",{attrs:{type:"primary"},on:{click:e.createDate}},[e._v("确 定")]):n("el-button",{attrs:{type:"primary"},on:{click:e.updateDate}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var o=n("VU/8")(i,l,!1,function(e){n("FMi9")},"data-v-22e90481",null);t.default=o.exports},xxy8:function(e,t,n){(e.exports=n("FZ+f")(!1)).push([e.i,"\ntable[data-v-22e90481]{\n  margin-top:20px;\n}\n",""])}});